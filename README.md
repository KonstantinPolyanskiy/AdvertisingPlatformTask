# AdvertisingPlatformTask

AdvertisingPlatformTask - сервис поиска рекламных площадок на основе переданных локаций.

[Задание.](https://github.com/KonstantinPolyanskiy/AdvertisingPlatformTask/blob/main/example_source.txt)

## Требования

- [x] Реализован POST endpoint, принимающий [текстовый файл](https://github.com/KonstantinPolyanskiy/AdvertisingPlatformTask/blob/main/Тестовое%20задание%20.NET.pdf) для загрузки и сохранения рекламных площадок.
- [x] Реализован GET endpoint, принимающий в строке запроса локацию (location), и выдающий связанные с переданной локацией рекламные площадки.
- [x] Хранение загруженных данных происходит in-memory.
- [x] Написаны основные unit тесты. 

## Особенности реализации

- При загрузке данных для каждой локации в файле происходит полный рассчет подходящих для нее площадок: сохраняется сама локация и все ее родители. Благодаря этому поиск площадки происходит
  с алгоритмической сложностью, близкой к конснтантной - O(k), где k - количество слешей.
- При параллельной загрузе нового файла хранилище строит готовый индекс, затем подменяет им старый, в то время как читающие запросы не тормозятся и не видят промежуточного состояния.
- Подключен Swagger для удобного выполнения запросов.
- Проект помещен и запускается в Docker.

## Структура проекта: 

- **Core.WebApi**  
  *Реализация и обеспечение работы API*  
  &nbsp;&nbsp;&bull; **Controllers** – Контроллеры для обработки HTTP-запросов.  

- **Core.Data**  
  *Обеспечение логики сохранения и поиска данных (p.s. такое решение принято на основе того, что как правило работа с данными происходит на слое данных (СУБД), а не слое приложения)*  
  &nbsp;&nbsp;&bull; **Storages** – Класс для работы с данными.

- **Core.Application**  
  *Нормализация входных данных, обеспечение взаимодействия между слоем данных и слоем Api. 
  &nbsp;&nbsp;&bull; **Contracts** – Контракты (интерфейсы) слоя данных.
  &nbsp;&nbsp;&bull; **Normalizers** – Статический класс для нормализации входных данных перед их сохранением в хранилище.
  &nbsp;&nbsp;&bull; **Services** – Сервис уровня приложения для поиска рекламных площадок и загрузки данных.

## Запуск проекта в Docker

### Шаг 1. Клонирование репозитория

```bash
git clone https://github.com/KonstantinPolyanskiy/AdvertisingPlatformTask.git
```

### Шаг 2. Запуск docker образа

```bash
cd AdvertisingPlatformTask && docker compose up
```

### Шаг 3. Открыть страницу Swagger

```bash
http://localhost:8080/index.html
```



  
